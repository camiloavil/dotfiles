unbind C-b
set -g prefix C-s
bind C-s send-prefix

#Set default terminal Colors
set-option -ga terminal-overrides ",xterm*:Tc"
set -g default-terminal "tmux-256color"
set -g default-terminal "screen-256color"

# resizing using alt + arrow
bind -n M-Up resize-pane -U 5
bind -n M-Down resize-pane -D 5
bind -n M-Left resize-pane -L 5
bind -n M-Right resize-pane -R 5
bind -r m resize-pane -Z

# switch windows alt+number
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9

# Shift Alt vim keys to switch windows
bind -n M-h previous-window
bind -n M-l next-window
bind -n M-j previous-window
bind -n M-k next-window

#Set mouse support
set -g mouse on
#set-window-option -g mode-keys vi
set -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection # start selecting text with "v"
bind-key -T copy-mode-vi 'y' send -X copy-selection # copy text with "y"set-window-option -g mode-keys vi
#unbind -T copy-mode-vi MouseDragEnd1Pane # don't exit copy mode when dragging with mouse

# remove delay for exiting insert mode with ESC in Neovim
#set -sg escape-time 10

# Start windows and panes at 1 not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# split current window horizontally
unbind '"'
bind - split-window -v
# split current window vertically
unbind %
bind _ split-window -h

# floating window
bind-key -n M-g if-shell -F '#{==:#{session_name},temp}' {
detach-client
} {
display-popup -h 90% -w 85% -E "tmux new-session -A -s temp"
}

#Odsidian floating window
bind-key -n M-h if-shell -F '#{==:#{session_name},Obsidian}' {
detach-client
} {
display-popup -h 90% -w 95% -E "tmux new-session -A -s Obsidian"
}

# Reload Config whit Prefix + r
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

#set -g @plugin 'fabioluciano/tmux-tokyo-night'
set -g @plugin 'Nybkox/tmux-kanagawa'
set -g @kanagawa-theme "dragon"
# available plugins: battery, cpu-usage, git, gpu-usage, ram-usage, tmux-ram-usage, network, network-bandwidth, network-ping, ssh-session, attached-clients, network-vpn, weather, time, mpc, spotify-tui, playerctl, kubernetes-context, synchronize-panes
# available colors: white, gray, dark_gray, light_purple, dark_purple, cyan, green, orange, red, pink, yellow
# set -g @kanagawa-[plugin-name]-colors "[background] [foreground]"
set -g @kanagawa-plugins "ssh-session cpu-usage ram-usage time battery"
set -g @kanagawa-ssh-session-colors "yellow dark_gray"
set -g @kanagawa-cpu-usage-colors "dark_gray yellow"
set -g @kanagawa-ram-usage-colors "yellow dark_gray"
set -g @kanagawa-time-colors "dark_gray yellow"
set -g @kanagawa-battery-colors "yellow dark_gray"
set -g @kanagawa-show-empty-plugins true
set -g @kanagawa-border-contrast true
set -g @kanagawa-show-powerline true
set -g @kanagawa-show-edge-icons true
set -g @kanagawa-show-left-sep ÓÇ∏
set -g @kanagawa-show-flags true
set -g @kanagawa-show-timezone false
set -g @kanagawa-ram-usage-label "Óâ¶ "
set -g @kanagawa-cpu-usage-label "Ôãõ "
set -g @kanagawa-battery-label false
set -g @kanagawa-show-battery-status true
set -g @kanagawa-no-battery-label "Ôíí "
# it can accept `hostname` (full hostname), `session`, `shortname` (short name), `smiley`, `window`, or any character.
# default is 1, it can accept any number and 0 disables padding.
set -g @kanagawa-show-left-icon "#h | #S | #W"
set -g @kanagawa-left-icon-padding 1
# set -g @kanagawa-show-left-icon smiley
# Transparent Background
set -g @kanagawa-ignore-window-colors true

# Integration sesh tmux-fzf 
bind-key x kill-pane # skip "kill-pane 1? (y/n)" prompt
bind-key X kill-session # skip "kill-pane 1? (y/n)" prompt
set -g detach-on-destroy off  # don't exit from tmux when closing a session
bind -N "last-session (via sesh) " L run-shell "sesh last"
# bind -N "switch to root session (via sesh) " 9 run-shell "sesh connect --root \'$(pwd)\'"
bind-key "a" run-shell "sesh connect \"$(
  sesh list --icons | fzf-tmux -p 55%,60% \
    --no-sort --ansi --border-label ' sesh ' --prompt '‚ö°  ' \
    --header '  ^a all ^t tmux ^g configs ^x zoxide ^d tmux kill ^f find' \
    --bind 'tab:down,btab:up' \
    --bind 'ctrl-a:change-prompt(‚ö°  )+reload(sesh list --icons)' \
    --bind 'ctrl-t:change-prompt(ü™ü  )+reload(sesh list -t --icons)' \
    --bind 'ctrl-g:change-prompt(‚öôÔ∏è  )+reload(sesh list -c --icons)' \
    --bind 'ctrl-x:change-prompt(üìÅ  )+reload(sesh list -z --icons)' \
    --bind 'ctrl-f:change-prompt(üîé  )+reload(fd -H -d 2 -t d -E .Trash . ~)' \
    --bind 'ctrl-d:execute(tmux kill-session -t {2..})+change-prompt(‚ö°  )+reload(sesh list --icons)' \
)\""

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-resurrect' # persist tmux sessions after computer restart
# set -g @plugin 'tmux-plugins/tmux-continuum' # automatically saves sessions for you every 15 minutes
# set -g @resurrect-capture-pane-contents 'on'
# set -g @continuum-restore 'on'

set -g @plugin 'tmux-plugins/tmux-yank'
set -g @yank_action 'copy-pipe-no-clear'
bind -T copy-mode    C-c send -X copy-pipe-no-clear "xsel -i --clipboard"
bind -T copy-mode-vi C-c send -X copy-pipe-no-clear "xsel -i --clipboard"
set -g set-clipboard on

set -sg escape-time 0 
set -g status-interval 0
set -g mode-keys vi
set -g status-position top

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
